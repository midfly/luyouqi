(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-uUserInfo"],{"055f":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={props:{status:String},data:function(){return{fail_icon:this.$mAssetsPath.fail_icon,customerStatus:this.$mConstDataConfig.status}},onLoad:function(e){},watch:{status:function(e,t){uni.setNavigationBarTitle({title:"商户".concat(this.customerStatus[e])})}},methods:{toUrl:function(){e("log",this.$mRoutesConfig.userInfo," at components/m-fail/m-fail.vue:38"),this.$mRouter.push({route:this.$mRoutesConfig.userInfo})}}};t.default=a}).call(this,a("0de9")["log"])},1081:function(e,t,a){var n=a("80f4");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("b6c52a46",n,!0,{sourceMap:!1,shadowMode:!1})},"4a10":function(e,t,a){"use strict";a.r(t);var n=a("bfcd"),r=a("50d9");for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a("f092");var i,s=a("f0c5"),u=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"209abd44",null,!1,n["a"],i);t["default"]=u.exports},"50d9":function(e,t,a){"use strict";a.r(t);var n=a("055f"),r=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},"65ac":function(e,t,a){"use strict";a.r(t);var n=a("dbb0"),r=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},"7e3e":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".fail-page[data-v-209abd44]{position:absolute;top:0;left:0;width:100%;height:100%;padding:0 %?50?%;box-sizing:border-box}.fail-page__icon > uni-view[data-v-209abd44]{width:%?240?%;height:%?220?%;margin:%?150?% auto 0}.fail-page__icon > uni-view uni-image[data-v-209abd44]{width:100%;height:100%}.fail-page__icon > uni-text[data-v-209abd44]{padding:%?25?% 0;font-size:%?36?%;color:#333;white-space:nowrap;position:relative;display:block;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);text-align:center}.fail-page__action[data-v-209abd44]{margin-top:%?50?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}",""]),e.exports=t},"80f4":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".input-group[data-v-03710a9c]{background-color:#fff;border-radius:%?10?%;margin-top:%?10?%}",""]),e.exports=t},9607:function(e,t,a){var n=a("7e3e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("b065f76c",n,!0,{sourceMap:!1,shadowMode:!1})},bfcd:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.status?a("v-uni-view",{staticClass:"fail-page"},[a("v-uni-view",{staticClass:"fail-page__icon"},[a("v-uni-view",[a("v-uni-image",{attrs:{src:e.fail_icon,mode:""}})],1),a("v-uni-text",[e._v(e._s(e.customerStatus[e.status]))])],1),"REJECT"==e.status?a("v-uni-view",{staticClass:"fail-page__action"},[a("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toUrl.apply(void 0,arguments)}}},[e._v("查看原因")])],1):e._e()],1):e._e()},o=[]},c55d:function(e,t,a){"use strict";a.r(t);var n=a("f4d0"),r=a("65ac");for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a("de31");var i,s=a("f0c5"),u=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"03710a9c",null,!1,n["a"],i);t["default"]=u.exports},dbb0:function(e,t,a){"use strict";var n=a("4ea4");a("b64b"),a("ac1f"),a("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),o=n(a("5530")),i=a("2f62"),s=n(a("868f")),u=n(a("cdd8")),c=n(a("c94b")),l=n(a("ae26")),d=n(a("d5ab")),f=n(a("5683")),p=n(a("7d61")),m=n(a("ab65")),v=n(a("4a10")),g={components:{mInput:s.default,mCell:u.default,mpvuePicker:c.default,mUpimg:f.default,mCodedialog:m.default,mFail:v.default},computed:(0,o.default)({},(0,i.mapState)(["customerInfo"])),data:function(){return{joyPageStatus:"",customerStatus:"",cover50:this.$mAssetsPath.upload_1,cover51:this.$mAssetsPath.upload_2,cover52:this.$mAssetsPath.upload_3,showCodeDialog:!1,cityData:l.default,org:{label:"请选择地区"},params:{cardNo:"",bankName:"",mobile:""},reqBody:{}}},onLoad:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initpage();case 1:case"end":return t.stop()}}),t)})))()},methods:{initpage:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.joyPageStatus="loading",t.prev=1,t.next=4,e.$AppEntryController.customerStatusInterceptor();case 4:if(e.customerStatus=t.sent,e.joyPageStatus="success","SUCCESS"==e.customerStatus){t.next=8;break}return t.abrupt("return");case 8:e.getCustomerInfo(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.joyPageStatus="fail";case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()},getCustomerInfo:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apis.getCustomer();case 2:a=t.sent,e.$store.commit("SET_CUSTOMERINFO",a),e.setForm(a);case 5:case"end":return t.stop()}}),t)})))()},setForm:function(e){Object.keys(e).length},submit:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.reqBody["customerNo"]=e.customerInfo["customerNo"],e.reqBody["userName"]=e.customerInfo["userName"],e.reqBody["idCard"]=e.customerInfo["idCard"],e.reqBody["cardNo"]=(e.params["cardNo"]+"").replace(/\s+/g,""),e.reqBody["cityNo"]=e.params["cityNo"],e.reqBody["bankName"]=e.params["bankName"],e.reqBody["mobile"]=e.params["mobile"],e.reqBody["settleCardImgId"]=e.params["settleCardImgId"],e.reqBody["cardHolderIdImgId"]=e.params["cardHolderIdImgId"],a=d.default.check(e.reqBody,p.default.updataCustomerCardRule),a){t.next=13;break}return uni.showToast({title:d.default.error,icon:"none"}),t.abrupt("return");case 13:return t.next=15,e.$apis.getMsgCode({mobile:e.params.mobile,type:"0"});case 15:e.openCodeDialog();case 16:case"end":return t.stop()}}),t)})))()},showMulLinkageThreePicker:function(){this.$refs.cityPicker.show()},onConfirm:function(e){this.org=e,this.params.cityNo=e.value[1]},codedialogChange:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!=e.type){a.next=5;break}t.showCodeDialog=!1,t.upDateCustomerInfo(e.code),a.next=13;break;case 5:if(-1!=e.type){a.next=10;break}uni.showToast({icon:"none",title:"已关闭"}),t.showCodeDialog=!1,a.next=13;break;case 10:return e.resendCall(),a.next=13,t.$apis.getRegCode({mobile:t.params.mobile});case 13:case"end":return a.stop()}}),a)})))()},openCodeDialog:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showCodeDialog=!0;case 1:case"end":return t.stop()}}),t)})))()},upDateCustomerInfo:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.reqBody["code"]=e,a.next=3,t.$apis.upDateCustomerInfo(t.reqBody);case 3:n=(0,o.default)((0,o.default)({},t.customerInfo),t.reqBody),t.$store.commit("SET_CUSTOMERINFO",n),uni.showToast({title:"修改成功"}),setTimeout((function(){t.$mRouter.redirectTo({route:t.$mRoutesConfig.userInfo})}),800);case 7:case"end":return a.stop()}}),a)})))()},upImgData:function(e){this.params[e.paramsKey]=e.id},onCardNoBlur:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.detail.value.replace(/\s+/g,""),n){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,t.$apis.getCardBin({cardNo:n});case 5:r=a.sent,t.params["bankName"]=r.name;case 7:case"end":return a.stop()}}),a)})))()},formatCardNo:function(e){this.params.cardNo=this.$mUtils.formatCardNo(e)}}};t.default=g},de31:function(e,t,a){"use strict";var n=a("1081"),r=a.n(n);r.a},f092:function(e,t,a){"use strict";var n=a("9607"),r=a.n(n);r.a},f4d0:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var n={mInput:a("868f").default,mCell:a("cdd8").default,mUpimg:a("5683").default,mpvuePicker:a("c94b").default,mCodedialog:a("ab65").default,mFail:a("4a10").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("joy-page",{staticClass:"uUserInfo-page",attrs:{joyPageStatus:e.joyPageStatus}},["SUCCESS"==e.customerStatus?[a("v-uni-view",{staticClass:"input-group"},[a("v-uni-view",{staticClass:"input-row border-bottom-1px"},[a("v-uni-text",{staticClass:"title"},[e._v("银行账号")]),a("m-input",{attrs:{type:"text",clearable:!0,placeholder:"请输入银行账号",maxLength:30,focus:!0},on:{onblur:function(t){arguments[0]=t=e.$handleEvent(t),e.onCardNoBlur.apply(void 0,arguments)},input:function(t){arguments[0]=t=e.$handleEvent(t),e.formatCardNo.apply(void 0,arguments)}},model:{value:e.params.cardNo,callback:function(t){e.$set(e.params,"cardNo",t)},expression:"params.cardNo"}})],1),e.params.bankName?a("v-uni-view",{staticClass:"input-row border-bottom-1px"},[a("v-uni-text",{staticClass:"title"},[e._v("银行名称")]),a("m-input",{attrs:{type:"text",placeholder:"",disabled:!0,maxLength:50},model:{value:e.params.bankName,callback:function(t){e.$set(e.params,"bankName",t)},expression:"params.bankName"}})],1):e._e(),a("m-cell",{attrs:{title:"开户地区",isLink:!0,bottomLine:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showMulLinkageThreePicker.apply(void 0,arguments)}}},[e._v(e._s(e.org.label))]),a("v-uni-view",{staticClass:"input-row"},[a("v-uni-text",{staticClass:"title"},[e._v("预留手机号")]),a("m-input",{attrs:{type:"number",clearable:!0,placeholder:"请输入手机号",maxLength:11},model:{value:e.params.mobile,callback:function(t){e.$set(e.params,"mobile",t)},expression:"params.mobile"}})],1)],1),a("v-uni-view",{},[a("m-upimg",{attrs:{api:e.$apis.upload,imgType:"SETTLE_CARD_IMG",paramsKey:"settleCardImgId",cover:e.cover52,placeholder:"请拍摄身份证和结算卡照片"},on:{onUpImg:function(t){arguments[0]=t=e.$handleEvent(t),e.upImgData.apply(void 0,arguments)}}}),a("m-upimg",{attrs:{api:e.$apis.upload,imgType:"CARDHOLDER_WITH_ID",paramsKey:"cardHolderIdImgId",cover:e.cover51,placeholder:"请拍摄本人手持身份证正面、银行卡正面照片"},on:{onUpImg:function(t){arguments[0]=t=e.$handleEvent(t),e.upImgData.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"btn-row"},[a("v-uni-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交")])],1),a("mpvue-picker",{ref:"cityPicker",attrs:{themeColor:"#007AFF",mode:"multiLinkageSelector",deepLength:2,pickerValueDefault:[0,0],pickerValueArray:e.cityData},on:{onConfirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm.apply(void 0,arguments)}}}),a("m-codedialog",{attrs:{show:e.showCodeDialog,len:6,autoCountdown:!0,phone:e.params.mobile},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.codedialogChange.apply(void 0,arguments)}}})]:[a("m-fail",{attrs:{status:e.customerStatus}})]],2)},o=[]}}]);